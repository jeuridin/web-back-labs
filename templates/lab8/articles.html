{% extends 'base.html' %}

{% block lab %}Лабораторная работа 8{% endblock %}
{% block style%}<style>
h1 {
    text-align: center;
}
form {
    text-align: center;
    margin-bottom: 10px;
}
input[type="text"] {
    padding: 5px;
    width: 200px;
}
button {
    padding: 5px 10px;
    cursor: pointer;
}
ul {
    list-style: none;
    padding: 0;
}
li {
    background: #fff;
    margin-bottom: 8px;
    padding: 8px;
    border: 1px solid #ccc;
}
a {
    color: #3498db;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
span {
    color: red;
}
</style>
{% endblock %}}
{% block main %}
        <h1>Список статей</h1>
        <form action="/lab8/articles" method="get">
            <input type="text" name="query" placeholder="Поиск..." value="{{ query }}">
            <button type="submit">Искать</button>
        </form>
        <ul>
            {% for article in articles %}
                <li>
                    <strong>{{ article.title }}</strong><br>
                    {{ article.article_text }}<br>
                    Автор ID: {{ article.login_id }}<br>
                    {% if article.is_public %}
                        Публичная
                    {% else %}
                        Приватная
                    {% endif %}
                    {% if current_user.is_authenticated and article.login_id == current_user.id %}
                        {% if article.is_favorite %}
                            <span style="color: red;">★ В избранном</span>
                        {% endif %}
                        <form action="/lab8/edit/{{ article.id }}" method="get" style="display:inline;">
                            <button type="submit">Редактировать</button>
                        </form>
                        <form action="/lab8/delete/{{ article.id }}" method="post" style="display:inline;">
                            <button type="submit">Удалить</button>
                        </form>
                    {% endif %}
                </li>
            {% else %}
                <li>Статей пока нет</li>
            {% endfor %}
        </ul>
        <a href="/lab8/">На главную</a>
{% endblock %}