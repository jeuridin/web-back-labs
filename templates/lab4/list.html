{% extends 'base.html' %}

{% block lab %}Лабораторная работа 4{% endblock %}

{% block main %}
    <h2>Пользователи</h2>
    <table border="1">
        <tr>
            <th>Имя</th>
            <th>Логин</th>
        </tr>
        {% for user in users %}
            <tr>
                <td>{{ user.name }}</td>
                <td>{{ user.login }}</td>
            </tr>
        {% endfor %}
    </table>

    <h3>Редактировать свои данные</h3>
    <form method="POST">
        <input type="hidden" name="action" value="edit">
        Логин: <input type="text" name="login" value="{{ session['login'] }}"><br>
        Имя: <input type="text" name="name" value="{{ session['name'] }}"><br>
        Новый пароль: <input type="password" name="password"><br>
        Подтверждение пароля: <input type="password" name="password_confirm"><br>
        <button type="submit">Сохранить</button>
    </form>

    {% if error %}
        <p style="color:red">{{ error }}</p>
    {% endif %}
    <h3>Удалить себя</h3>
    <form method="POST">
        <input type="hidden" name="action" value="delete">
        <button type="submit">Удалить</button>
    </form>

    <form method="POST" action="/lab4/login">
        <button type="submit">Выйти</button>
    </form>

{% endblock %}
